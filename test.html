<!DOCTYPE html>
<html>

<head>
<title>EU API</title>
</head>

<body>
<form>
<label>id: <input type="text" id="id"></input></label>
<button type="button" id="submit">Query</button>
</form>
<div id="result"></div>


<script>
/* at the end to wait for DOM */
document.getElementById("submit").addEventListener("click", firequery);

function firequery(){
	var id = document.getElementById("id").value;
	console.log("Querying for " + id);
  var api = "https://ec.europa.eu/research/participants/api/";
	var query = "orgProfile/publicProjectsByPic.json?pic=";
  postData(api & query, {"id": id})
  .then(data => {document.getElementById("result").innerHTML = (JSON.stringify(data))}) // JSON-string from `response.json()` call
  .catch(error => console.error(error));
}

function postData(url = ``, data = {}) {
  // Default options are marked with *

  var d = JSON.stringify(data);
  console.log(d);
    return fetch(url, {
        method: "POST", // *GET, POST, PUT, DELETE, etc.
        body: d, // body data type must match "Content-Type" header
    })
    .then(response => response.json()); // parses response to JSON
}
</script>
</body>
</html>
