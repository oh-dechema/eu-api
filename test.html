<!DOCTYPE html>
<html>

<head>
<title>EU API</title>
</head>

<body>
<form>
<label>id: <input type="text" id="id"></input></label>
<button type="button" id="submit">Query</button>
</form>
<div id="result"></div>


<script>
/* at the end to wait for DOM */
document.getElementById("submit").addEventListener("click", firequery);

function firequery(){
	var id = document.getElementById("id").value;
	console.log("Querying for " + id);
	var query =  "https://data.europa.eu/euodp/data/api/3/action//package_show"
  postData(query, {"id": id})
  .then(data => {document.getElementById("result").innerHTML = (JSON.stringify(data))}) // JSON-string from `response.json()` call
  .catch(error => console.error(error));
}

function postData(url = ``, data = {}) {
  // Default options are marked with *
    return fetch(url, {
        method: "POST", // *GET, POST, PUT, DELETE, etc.
        mode: "cors", // no-cors, cors, *same-origin
        cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
        credentials: "omit", // include, *same-origin, omit
        headers: {
            "Content-Type": "application/json; charset=utf-8",
            "Access-Control-Request-Method": "POST",
            "Access-Control-Request-Headers": "origin, x-requested-with, accept"
            // "Content-Type": "application/x-www-form-urlencoded",
        },
        redirect: "follow", // manual, *follow, error
        referrer: "no-referrer", // no-referrer, *client
        body: JSON.stringify(data), // body data type must match "Content-Type" header
    })
    .then(response => response.json()); // parses response to JSON
}
</script>
</body>
</html>
